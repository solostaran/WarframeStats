extends layout

block append link
	link(rel='stylesheet', href='https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css')

block append scripts
	script(src="https://code.jquery.com/jquery-3.6.0.min.js")
	script(src='https://code.jquery.com/ui/1.13.1/jquery-ui.js')
	script(type='text/javascript').
		// cf. https://jqueryui.com/datepicker/
		$(document).ready(function() {
			$('#startDate').datepicker({
					dateFormat:'yy/mm/dd',
					onSelect: function(d) {
						$('#formOptions').submit();
					}
			});
			$('#endDate').datepicker({
					dateFormat: 'yy/mm/dd',
					onSelect: function (d) {
							$('#formOptions').submit();
					}
			});
		});
	script(src='/javascripts/rewardListScripts.js')

block content
	script.
		document.getElementById('nav-rewlist').classList.add('active');

	- nbRewards = totalCount;
	div(class='container-fluid')
		div(class='row mt-1')
			if (totalCount == 0)
				h3 No sortie rewards with current selection
			else
				h3 Sortie Rewards from #{offset + 1} to #{offset + rewards.length} over #{totalCount} rewards.
		form(action='/rewardForm/list' id="formOptions" method='post')
			div(class='row')
				div(class='col-sm p-1')
					if (offset > 0)
						button(style='margin-left:5px' onclick="return first();" type='submit') first
						button(style='margin-left:5px' onclick="return previous();" type='submit') <=
					else
						button(style='margin-left:5px' disabled) first
						button(style='margin-left:5px' disabled) <=
					input(type='text' id='nb' name='nb' size='3' value=nb onchange='onChangeNb();' style='text-align: center; margin-left: 5px;')
					input(type='hidden' id='offset' name='offset' value=offset)
					if (hasNext === true)
						button(style='margin-left:5px' onclick="return next("+totalCount+");" type='submit') =>
					else
						button(style='margin-left:5px' disabled) =>
					if (offset + nb < totalCount)
						button(style='margin-left:5px' onclick="return last("+totalCount+");") last
					else
						button(style='margin-left:5px' disabled) last
				div(class='col-sm p-1')
					label(for='startDate' style='margin-right:5px;') Date >=
					button(onclick="return resetDate(this.nextElementSibling);" type='button') X
					input(id='startDate' name='dateLow' type='text' size='10' value=dateLow readonly)
				div(class='col-sm p-1')
					label(for='endDate' style='margin-right:5px;') Date <=
					button(onclick="return resetDate(this.nextElementSibling);" type='button') X
					input(type='text' name='dateHigh' id='endDate' size='10' value=dateHigh readonly)
				div(class='col-sm p-1')
					label(for='perType') Filter by type :
					select(name='type' id='perType' onchange='onSelect(this)')
						option -
						each type in rewardTypes
							if (rewardTypeSelected && (rewardTypeSelected.toString() === type._id.toString()))
								option(value= type._id selected) #{type.name}
							else
								option(value= type._id) #{type.name}
			div(class='row')
				table(class='table table-responsive table-striped table-hover')
					thead
						tr
							th Details
							th Date
							th Type
							th Additional information
					tbody
						each val in rewards
							tr
								td
									a(class='btn btn-outline-info', href='/reward/view/'+val._id) More info
								if (val.date)
									td= date2string(val.date)
								else
									td -
								td= val.type.name
								td
									if (val.booster)
										span= boosterTypes[val.booster]
									else
										if (val.riven)
											span= val.riven.weaponName
										else
											span -
